# CS160 证明写作速记（Algorithms）

## 一、什么是“好证明”

- **正确**（逻辑与结论无误）
- **步步相承**（每句都清楚地由上一步推出）
- **易读**（结构清晰、语言简洁）
- 上述是**必要但非充分**条件：历史上也有被多人认可却后来被推翻的“证明”（如四色定理早期证明）。因此要保持严谨与谦逊。

## 二、通用写作原则

1. **先说清要证什么**
   - 题目若说“证明 X”，可写：*Claim: X*。
   - 长命题可先**摘要/改写**。
   - 开放题先给**结论/思路总览**（punchline）。
2. **再说清怎么证**
   - 先交代方法：如“对 \(k\) 归纳”“用对数性质”“期望线性性”等，再进入推导。
3. **明确读者画像**
   - 面向**持怀疑态度的同学**，而非已经知道答案的助教/老师。
4. **逐行引导**
   - 说明每一步用到的定理/性质；只有非常显然的移项可省略。
5. **避免大段文字墙**
   - 用小段落、编号、列表，避免重复表述；成稿后**通读压缩**。
6. **从头往前推**
   - 证明**以目标作为终点**，不要从结论倒推（可先声明目标，但推导按正向展开）。
7. **写完后复审**
   - 隔一段时间再看：是否必要、是否需补来源、是否可更简洁。

## 三、例子：好与不好的对比（要点）

- **差**：只有算式、没句子；不交代题目/假设/结论；逻辑断裂。
- **好**：先给**答案**与**策略**；等式嵌入**完整句子**；突出关键式；省略微不足道的代数步骤。

## 四、CS160 常见证明/写作场景

### 1）“按摩等式/不等式”（如大 O 证明）

- 目标：把原式**等价变形**或**上界化**到目标表达式。
- **逐步**、**逐行给理由**（如“因 \(n>0\)，有 \(7n^3 \le 7n^4\)”）。
- 结尾**回扣定义**（如：存在 \(c,n_0\) 使…，故为 \(O(n^4)\)），并可用“■/□ (QED)”标记收束。

**迷你模板（Big-O）**

```text
Claim. f(n) = … = O(g(n)).
Proof. 取常数 c, n0。当 n ≥ n0 时，
    f(n) ≤ … ≤ c · g(n).
故按大 O 定义，结论成立。□
```

### 2）“设计算法类”题

**推荐三段式结构**

- **Algorithm（算法）**：用自然语言给**可执行步骤**（能作用于任意输入）；循环要写**一般一步**怎么做；如基于课堂算法，只写**修改点**。
- **Justification（正确性）**：说明**为何对所有输入**都成立；必要时给不变式/归纳等。
- **Time & Space（复杂度）**：给出尽量**紧的界**并**简证**。

**示例（喂龙与三明治）**

- 算法：龙按体型降序、三明治按大小降序，各自排序后**配对同位次**。
- 正确性：若 \(d_i>d_j\) 则 \(s_i\ge s_j\)，无嫉妒。
- 复杂度：排序 \(\Theta(k\log k)\)，配对 \(\Theta(k)\)，总 \(\Theta(k\log k)\)；空间 \(\Theta(k)\)。

**三段式迷你模板**

```text
Algorithm. ……
Justification. 设不变式/排序关系/归纳步：……因此对任意输入成立。
Time & Space. 排序/数据结构/扫描分别耗时……，总为……；空间为……。□
```

### 3）“辅助引理”（Auxiliary Lemma）

- 把大问题拆成**关键子结论**（引理），先证明再回代主命题。
- 例：二分查找的引理——“每一步至少排除一半元素”。
  用此引理即可在主证明中推出**对数级**步数与时间。

**引理模板**

```text
Lemma. ……
Proof. 分情况/构造/不变式/归纳：…… □
Use of Lemma. 由引理得每步规模减半，故总步数 ≤ ⌈log₂ n⌉，时间 O(log n)。□
```

## 五、常见错误与改进

1) **仅引用课外神器**

- 例：只说“用 BFPRT（线性时间选择）”，不给改动点与正确性/复杂度说明。
- 改：**优先用课内工具**；若用课外法，需讲**适用条件、如何贴合题意、为何正确**。

2) **过度伪代码**

- 这门课重**算法理解与表达**，伪代码只能**辅助**；不要让读者去调试越界/重复值等细节。

3) **说了太多无关细节**

- 只写**相对课堂算法的改动**与**关键论证**，把注意力放在“为何能解题”。

4) **排序解第 k 大（良好范例）**

- 算法：对数组做 MergeSort，返回第 \(n-k+1\) 个（1-index）。
- 正确性：排序后第 \(i\) 位即第 \(i\) 小；第 \(n-k+1\) 小即第 \(k\) 大。
- 复杂度：时间 \(O(n\log n))\)，空间 \(O(n))\)。

## 六、课程常用规则（答题习惯）

- **必须给出理由**（即使结论错，有理有据也比无理由好）。
- **关心渐进量级**：\(42n+15\) 与 \(\Theta(n)\) 在本课同样可接受（同等论证下）。
- **多解择优**：复杂度更优者更受欢迎（需给出并证明复杂度）。
- **给出通用算法**：即便题目用具体例子描述。
- **表达层次偏好**：结构化证明 > 要点列表 > 伪代码 > 文字墙。
- **用课内工具可解**：若用课外工具，步骤（正确性、复杂度等）不可省。

## 七、可直接套用的句式

- **开题**：*Claim.* / *We aim to show that …*
- **方法交代**：*We prove this by induction on … / by contradiction / by constructing …*
- **逐步理由**：*By monotonicity … / Using linearity of expectation … / Since \(n\ge n_0\) …*
- **引理**：*We first establish the following lemma …*
- **收束**：*Therefore, by definition of Big-O / by the invariant, the algorithm is correct. □*

## 八、提交前自检清单（Quick Check）

- [ ] 先讲清**要证什么**与**怎么证**
- [ ] 每步都有**依据/理由**
- [ ] 结构清晰：小节/编号/列表
- [ ] 不必要的代数细节已**省略**
- [ ] 算法题按**算法/正确性/复杂度**三段写清
- [ ] 引理是否能**明显减负**且已被调用
- [ ] 结尾**回扣定义/命题**并标记收束（□）
